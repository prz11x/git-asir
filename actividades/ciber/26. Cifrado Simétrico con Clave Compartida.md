# FASE 2 — Verificar OpenSSL

`openssl version`

Si devuelve versión → módulo activo.

---

#  FASE 3 — Crear mensaje sensible

`echo "Credenciales núcleo warp: acceso nivel comandante." > mensaje.txt cat mensaje.txt`



---

#  FASE 4 — Generar clave segura

`openssl rand -base64 32`

Esto genera 256 bits aleatorios.

 No guardar la clave dentro del mismo directorio del mensaje cifrado.
 
rui11@rui-server:~$ openssl rand -base64 32
yXVQMgMb4WqQdoQCaJlzxhICcgpUIeLv+wI9fJGbW7M=

---

# FASE 5 — Cifrado AES-256-CBC

`openssl enc -aes-256-cbc -salt -in mensaje.txt -out mensaje.enc`

Introducir contraseña cuando lo solicite.

Verificar:

`cat mensaje.enc`

Resultado: datos ilegibles y cifrado correcto.

rui11@rui-server:~$ cat mensaje.enc
%�m�@��&H�Lý��1�����1�L����r


---

#  FASE 6 — Simular intento sin clave

`openssl enc -aes-256-cbc -d -in mensaje.enc`

Resultado:

- Error de descifrado
    
- Texto corrupto
    

Sin clave no se puede recuperar el mensaje.

---

# FASE 7 — Descifrado autorizado

`openssl enc -aes-256-cbc -d -in mensaje.enc -out mensaje_recuperado.txt`

Verificar integridad:

`diff mensaje.txt mensaje_recuperado.txt`

Si no muestra diferencias = integridad confirmada.

rui11@rui-server:~$ openssl enc -aes-256-cbc -salt -in mensaje.txt -out mensaje.enc
enter AES-256-CBC encryption password:
Verifying - enter AES-256-CBC encryption password:
*** WARNING : deprecated key derivation used.
Using -iter or -pbkdf2 would be better.

rui11@rui-server:~$ cat mensaje_recuperado.txt
Credenciales núcleo warp: acceso nivel comandante

---

#  FASE 8 — Cifrado moderno (AES-256-GCM)

CBC cifra, pero **no garantiza integridad**.

Probar modo autenticado:

`openssl enc -aes-256-gcm -salt -in mensaje.txt -out mensaje_gcm.enc`

Intentar alterar el archivo:

`echo "X" >> mensaje_gcm.enc`

Descifrar:

`openssl enc -aes-256-gcm -d -in mensaje_gcm.enc`

Resultado:

 Fallo de autenticación.